import { z } from "zod";
import { createFindParams } from "@medusajs/medusa/api/utils/validators";

{{#each models}}
export const Get{{toPascalCase name}}Schema = createFindParams();

export const PostAdminCreate{{toPascalCase name}} = z.object({
  {{#each fields}}
  {{#unless relation}}
  {{name}}: z.{{#if (type type "text")}}string(){{else if (type type "number")}}number(){{else if (type type "boolean")}}boolean(){{else if (type type "date")}}date(){{else}}string(){{/if}}{{#if validation.required}}.min(1){{else}}.optional(){{/if}}
    {{#if validation.min}}.min({{validation.min}}){{/if}}
    {{#if validation.max}}.max({{validation.max}}){{/if}}
    {{#if validation.email}}.email(){{/if}}
    {{#if validation.regex}}.regex(new RegExp('{{validation.regex}}')){{/if}},
  {{/unless}}
  {{/each}}
});

export const PostAdminUpdate{{toPascalCase name}} = z.object({
  {{#each fields}}
  {{#unless relation}}
  {{name}}: z.{{#if (type type "text")}}string(){{else if (type type "number")}}number(){{else if (type type "boolean")}}boolean(){{else if (type type "date")}}date(){{else}}string(){{/if}}.optional()
    {{#if validation.min}}.min({{validation.min}}){{/if}}
    {{#if validation.max}}.max({{validation.max}}){{/if}}
    {{#if validation.email}}.email(){{/if}}
    {{#if validation.regex}}.regex(new RegExp('{{validation.regex}}')){{/if}},
  {{/unless}}
  {{/each}}
});

export type AdminCreate{{toPascalCase name}}Req = z.infer<typeof PostAdminCreate{{toPascalCase name}}>;
export type AdminUpdate{{toPascalCase name}}Req = z.infer<typeof PostAdminUpdate{{toPascalCase name}}>;
{{/each}} 