import { Request, Response } from "express";
import { AdminUpdateReq } from "../validators";

export async function GET(req: Request, res: Response) {
  const service = req.scope.resolve("{{module.name}}");
  {{#if (isModuleModel model module)}}
  const result = await service.retrieve(req.params.id);
  {{else}}
  const result = await service.retrieve{{toPascalCase model.singular}}(req.params.id);
  {{/if}}
  res.json(result);
}

export async function PUT(req: Request<AdminUpdateReq>, res: Response) {
  const service = req.scope.resolve("{{module.name}}");
  {{#if (isModuleModel model module)}}
  const result = await service.update(req.params.id, req.body);
  {{else}}
  const result = await service.update{{toPascalCase model.singular}}(req.params.id, req.body);
  {{/if}}
  res.json(result);
}

export async function DELETE(req: Request, res: Response) {
  const service = req.scope.resolve("{{module.name}}");
  {{#if (isModuleModel model module)}}
  await service.delete(req.params.id);
  {{else}}
  await service.delete{{toPascalCase model.singular}}(req.params.id);
  {{/if}}
  res.status(204).end();
} 